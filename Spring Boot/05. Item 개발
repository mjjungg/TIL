## ê°œë°œ ìˆœì„œ

1. Item ì—”í‹°í‹° ê°œë°œ â†’ ì´ì „ ê°•ì˜ì—ì„œ ì™„ë£Œ + ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ ì¶”ê°€í•˜ê¸° 
2. Item ë ˆí¬ì§€í† ë¦¬ ê°œë°œ
3. Item ì„œë¹„ìŠ¤ ê°œë°œ
4. Item ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ 

## 1. Item ì—”í‹°í‹° ê°œë°œ

ì €ë²ˆì— ë§Œë“¤ì—ˆë˜ Item ì—”í‹°í‹°ì— ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ ì¶”ê°€í•˜ê¸°

```java
@Entity
...
public abstract class Item {
...
	//==ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§==//
	// ì¬ê³  ëŠ˜ë¦¬ê¸° 
	public void addStock(int quantity) {
		this.stockQuantity += quantity;
} 

// ì¬ê³  ì¤„ì´ê¸°
public void removeStock(int quantity) {
	...
	// ì¬ê³ ê°€ 0 ì´í•˜ì´ë©´ ì˜ˆì™¸ í„°ëœ¨ë¦¼! 
}
```

### ì˜ˆì™¸ ì²˜ë¦¬ - ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.

1. jpashopì— exceptioníŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•œë‹¤.
2. ì˜ˆì™¸ í´ë˜ìŠ¤ ë§Œë“ ë‹¤. (ex. NotEnoughStockException)

    (RuntimeException ìƒì†ë°›ìŒ)

3. ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©

### â“ Memberì—ì„œëŠ” ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì€ ì„œë¹„ìŠ¤ì— ë„£ì—ˆëŠ”ë° ì™œ Itemì€ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì—”í‹°í‹°ì— ë„£ì„ê¹Œ?

í•„ë“œë¥¼ ë³€ê²½í•˜ëŠ” ë¡œì§ì€ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆëŠ” ìª½ì— ë„£ìœ¼ë©´ **ì‘ì§‘ë ¥**ì´ ìˆê¸° ë•Œë¬¸ì— ê´€ë¦¬ê°€ ì‰½ë‹¤. 

âœ… ì‘ì§‘ë ¥? í•˜ë‚˜ì˜ ëª©ì ì— ë¶€í•©í•˜ê³  ê·¸ ëª©ì ì„ ì˜ ìˆ˜í–‰í•œë‹¤. 

- ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„ : ë„ë©”ì¸ì´ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì˜ ì£¼ë„ê¶Œì„ ê°€ì§€ê³  ê°œë°œí•˜ëŠ” ê²ƒ

 â†’ ì„œë¹„ìŠ¤ì˜ ë§ì€ ë¡œì§ì´ ì—”í‹°í‹°ë¡œ ì´ë™í•˜ê³ , ì„œë¹„ìŠ¤ëŠ” ì—”í‹°í‹°ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ì •ë„ì˜ ì–•ì€ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ ê°€ì§€ê²Œ ë¨ 

> ğŸ¯ ë„ë©”ì¸ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ê²½ìš° ë„ë©”ì¸ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬í•˜ë©´ ì¢‹ë‹¤!

## 2. Item ë ˆí¬ì§€í† ë¦¬ ê°œë°œ

```java
@Repository
@RequriredArgsConstructor
public class ItemRepository {
	private final EntityManager em;
	
	// ìƒí’ˆ ì €ì¥ 
	public void save(Item item) {
		...
	}

// ìƒí’ˆ ì¡°íšŒ
	public Item findOne(Long id) {
		...
	}

// ìƒí’ˆ ëª¨ë‘ ì¡°íšŒ 
	public List<Item> findAll() {
		...
	}
}
```

- emì— `@PersistenceContext` ì•ˆ ë¶™ì—¬ë„  `@RequriredArgsConstructor` ì— í¬í•¨ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— emì— final ë¶™ì´ë©´ ìë™ìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤.

## 3. Item ì„œë¹„ìŠ¤ ê°œë°œ

```java
@Service
@RequiredArgsConstrucor
@Transactional(readOnly = true)
public class ItemRepository {
	private final ItemRepository itemRepository;
	
	// ìƒí’ˆ ì €ì¥ 
	@Transactional
	public void saveItem(Item item) {
		itemRepository.save(item);
	}
	
	// ìƒí’ˆ ì¡°íšŒ 
	...
	
	// ìƒí’ˆ ëª¨ë‘ ì¡°íšŒ 
	...
}
```

> ğŸ’¡ ItemServiceëŠ” ItemRepositoryì— ë‹¨ìˆœíˆ ìœ„ì„í•˜ëŠ” í´ë˜ìŠ¤ì´ë‹¤!

## 4. Item ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
